# File is managed by Puppet
<%- if port = scope.lookupvar('ssh::server::merged_options').delete('Port') -%>
Port <%= port %>
<%- end -%>
<%- if listen = scope.lookupvar('ssh::server::merged_options').delete('ListenAddress') -%>
ListenAddress <%= listen %>
<%- end -%>

<%- scope.lookupvar('ssh::server::merged_options').sort_by{ |sk| (sk.to_s.downcase.include? "match") ? sk.to_s : '' }.each do |k, v| -%>
<%- if v.is_a?(Hash) -%>
<%= k %>
<%- v.sort.each do |key, value| -%>
    <%- if value.is_a?(Array) -%>
    <%- value.each do |a| -%>
    <%= key %> <%= a %>
    <%- end -%>
    <%- else -%>
    <%= key %> <%= value %>
    <%- end -%>
<%- end -%>
<%- else -%>
<%- if v.is_a?(Array) -%>
<%- v.each do |a| -%>
<%= k %> <%= a %>
<%- end -%>
<%- else -%>
<%= k %> <%= v %>
<%- end -%>
<%- end -%>
<%- end -%>
